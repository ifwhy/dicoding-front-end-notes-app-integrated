(()=>{const t="https://notes-api.dicoding.dev/v2",e=document.querySelector("form"),a=e.elements.judul,n=e.elements.isi_catatan,i=(document.getElementById("noteId"),document.getElementById("date-time"),document.getElementById("loading-animation-aktif")),s=document.getElementById("loading-animation-arsip"),o=i.querySelector(".loader"),d=s.querySelector(".loader"),r=async()=>{const e=i.querySelector("p");try{e.textContent="Loading...",o.style.display="block";const a=await fetch(`${t}/notes`),n=await a.json(),s=n.data?n.data:[];o.style.display="none";const d=document.getElementById("card-aktif");if(d.innerHTML="",s.length>0){i.classList.add("hidden"),i.classList.remove("flex");let t=1;s.forEach((e=>{const a=document.createElement("note-card");a.setAttribute("title",e.title),a.setAttribute("date-time",new Date(e.createdAt)),a.setAttribute("data-id",e.id),a.setAttribute("body",e.body),a.setAttribute("archived",e.archived),a.setAttribute("data-aos","zoom-in"),a.setAttribute("data-aos-easing","linear"),a.setAttribute("data-aos-duration",""+(250*t+250)),t++,t=6==t?t=1:t,d.appendChild(a)}))}else i.classList.remove("hidden"),i.classList.add("flex"),e.textContent="Tidak ada catatan yang diaktifkan"}catch(t){o.style.display="none",Swal.fire({icon:"Error!",title:"Oops...",text:"Terjadi kesalahan : "+t}),e.textContent="Terjadi Kesalahan"}},l=async()=>{const e=s.querySelector("p");try{e.textContent="Loading...",d.style.display="block";const a=await fetch(`${t}/notes/archived`),n=await a.json(),i=n.data?n.data:[];d.style.display="none";const o=document.getElementById("card-arsip");if(o.innerHTML="",i.length>0){s.classList.add("hidden"),s.classList.remove("flex");let t=1;i.forEach((e=>{const a=document.createElement("note-card");a.setAttribute("title",e.title),a.setAttribute("date-time",new Date(e.createdAt)),a.setAttribute("data-id",e.id),a.setAttribute("body",e.body),a.setAttribute("archived",e.archived),a.setAttribute("data-aos","zoom-in"),a.setAttribute("data-aos-easing","linear"),a.setAttribute("data-aos-duration",""+(250*t+250)),t++,t=6==t?t=1:t,o.appendChild(a)}))}else s.classList.remove("hidden"),s.classList.add("flex"),e.textContent="Tidak ada catatan yang diarsipkan"}catch(t){d.style.display="none",Swal.fire({icon:"Error!",title:"Oops...",text:"Terjadi kesalahan : "+t}),e.textContent="Terjadi Kesalahan"}};document.addEventListener("DOMContentLoaded",(()=>{AOS.init(),e.addEventListener("submit",(i=>{i.preventDefault(),(async(i,s)=>{try{const e=await fetch(`${t}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,body:s})});"success"===(await e.json()).status?Swal.fire({title:"Berhasil!",text:"Catatan berhasil ditambahkan!",icon:"success",iconColor:"#2563EB",confirmButtonColor:"#2563EB"}):Swal.fire({title:"Gagal!",text:"Terjadi kesalahan saat menambah catatan!",icon:"error",iconColor:"#DC2626",confirmButtonColor:"#DC2626"})}catch(t){Swal.fire({title:"Error!",text:"Terjadi error saat menambah catatan!",icon:"error",iconColor:"#DC2626",confirmButtonColor:"#DC2626"})}e.reset();const o=document.getElementById("sisa-karakter");remainingChars=30,o.textContent=`Sisa Karakter : ${remainingChars} `;const d=a.getAttribute("aria-describedby"),c=d?document.getElementById(d):null,u=n.getAttribute("aria-describedby"),m=u?document.getElementById(u):null;c&&c.classList.replace("visible","hidden"),m&&m.classList.replace("visible","hidden"),l(),r()})(a.value,n.value)})),r(),l()}))})();